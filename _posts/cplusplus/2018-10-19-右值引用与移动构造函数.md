---
layout: second_template
title: C++11中右值引用与移动构造函数
category : C++
tagline: "Supporting tagline"
tags : [C++]
permalink: move&right-reference
---

[id]: https://mp.weixin.qq.com/s/2_y3NgMH6b8bTKZ8pZTuew
* ### 测试环境 ###
	
	vs2015

	C++11	

* #### 左值和右值 ####
	早期C语言给出的定义是：左值是一个表达式，可以出现在=的左边或右边;但右值只能出现在右边。

	**临时对象是右值**

	`
	void leftValueAndRightValue()
	{
		int nLeftValue = 10;	// nLeftValue是左值，10是右值
		int* nP = &nLeftValue;	// nLeftValue是左值
		int fun();
		int nResult = 0;
		nResult = fun();	// 此行中fun是右值
		int* nP1 = &fun();  // 错误，表达式必须为左值，不能获取右值的地址
	}
	`
	

* #### 左值引用和右值引用 ####
	c++11之前只有左值引用，也就是常用的引用&

	例如：

	`
	int& nLeftReference = nLeftValue; // 此行中nLeftValue是左值，nLeftReference是左值引用
	`
	**右值引用** 是 C++ 11中引入的新特性 ,可以理解为对右值的引用，我们知道在C++中右值不能被修改。但右值引用的出现，打破了这个限制，它允许我们获取右值的引用

	**右值引用的形式为：类型 && a= 被引用的对象**

	此外需要注意的是右值引用只能绑定到右值

	例如：

	`
	int nLeftValue = 10;	// nLeftValue是左值，10是右值
	int&& nRightReference = 10;
	int&& nRightErrRef = nLeftValue;	//错误: 无法将右值引用绑定到左值
	`	

* #### 引用作为函数参数 ####
	C++中的(左值)引用可以用作函数的参数，并且也建议尽可能用引用作为函数的参数，主要原因是传引用比传值效率更高。其实不光左值引用可以作为函数参数，在C++中，右值引用也能作为函数参数

	例如：
	
	`
	void testRefParam(int& param)
	{
		cout << "left ref param" << endl;
	}
	void testRefParam(int&& param)
	{
		cout << "right ref param" << endl;
	}
	int main()
	{
		int nTest = 10;
		testRefParam(nTest); // 输出：left ref param
		testRefParam(10);	// 输出：right ref param
		system("pause");
    	return 0;
	}
	`
	
	**左值引用只能绑定左值（const左值引用除外）**

	**右值引用只能绑定右值**

* #### 构造函数的局限性 ####

* #### 移动构造函数 ####

* #### 参考文章: ####
[https://mp.weixin.qq.com/s/2_y3NgMH6b8bTKZ8pZTuew][id]